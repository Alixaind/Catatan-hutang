<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tentang Aplikasi</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-100 via-indigo-100 to-blue-50 min-h-screen font-sans text-gray-800">

  <!-- Container -->
  <div class="max-w-lg mx-auto p-6">

    <!-- Header ala iOS -->
    <header class="flex items-center mb-6">
      <a href="dashboard.html" class="mr-3 flex items-center text-blue-600 hover:text-blue-800">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        <span class="text-sm">Kembali</span>
      </a>
      <h1 class="flex-1 text-center text-lg font-semibold">Tentang</h1>
      <div class="w-12"></div> <!-- spacer biar judul center -->
    </header>

    <!-- Card ala iOS -->
    <main>
      <div class="rounded-3xl bg-white/70 backdrop-blur-lg shadow-lg p-6 space-y-6">
        <!-- Icon bulat -->
        <div class="text-center">
          <div class="w-16 h-16 rounded-full mx-auto flex items-center justify-center shadow-md overflow-hidden">
		    <img src="logo.png" alt="Logo" class="w-full h-full object-cover">
          </div>
          <h2 class="text-lg font-semibold mt-3">Catatan Keuangan</h2>
          <p class="text-xs text-gray-500">Versi 1.0.0</p>
        </div>

        <!-- Deskripsi -->
        <div class="space-y-3 text-sm leading-relaxed">
          <p><strong>Catatan Keuangan</strong> membantu Anda melacak catatan keuangan, khususnya pinjam meminjam uang antar nasabah.</p>
          <p>Dibangun dengan teknologi web modern dan didukung <span class="font-medium text-blue-600">Appwrite</span> untuk manajemen data aman dan real-time.</p>
        </div>

        <!-- Developer -->
        <div class="pt-4 border-t border-gray-200">
          <h3 class="font-medium text-gray-900 mb-1">Dikembangkan oleh</h3>
          <p class="text-gray-700">Dan R.</p>
        </div>

        <!-- Kontak -->
        <div class="pt-4 border-t border-gray-200">
          <h3 class="font-medium text-gray-900 mb-1">Hubungi Kami</h3>
          <p class="text-gray-700">
            Untuk dukungan atau pertanyaan, email ke 
            <a href="mailto:daniriyadi190@gmail.com" class="text-blue-600 underline">daniriyadi190@gmail.com</a>.
          </p>
        </div>
      </div>
    </main>
  </div>
<script>
    // Inisialisasi Appwrite
    const { Client, Account, Databases, Query } = Appwrite;
    const client = new Client();
    client.setEndpoint('https://fra.cloud.appwrite.io/v1').setProject('68b92f2c0028afdfe9af');
    const account = new Account(client);
    const databases = new Databases(client);

    // Variabel ID yang dibutuhkan
    const APPWRITE_DATABASE_ID = "68b93734003a60307a8c";
    const NOTIFIKASI_COLLECTION_ID = "notifikasi";

    // Fungsi untuk menampilkan notifikasi popup (toast)
    function showToast(message, type = 'success') {
        const container = document.getElementById('notificationContainer');
        if (!container) return;
        const toast = document.createElement('div');
        const bgColor = type === 'success' ? 'bg-blue-500' : 'bg-red-500';
        toast.className = `p-4 rounded-lg text-white shadow-lg ${bgColor}`;
        toast.textContent = message;
        container.appendChild(toast);
        setTimeout(() => {
            toast.style.transition = 'opacity 0.5s ease-out';
            toast.style.opacity = '0';
            setTimeout(() => toast.remove(), 500);
        }, 5000);
    }

    // Fungsi untuk 'mendengarkan' notifikasi baru dari Appwrite
    function listenForNotifications(userId) {
        client.subscribe(`databases.${APPWRITE_DATABASE_ID}.collections.${NOTIFIKASI_COLLECTION_ID}.documents`, response => {
            if (response.events.includes('databases.*.collections.*.documents.*.create')) {
                const newNotification = response.payload;
                if (newNotification.recipientId === userId) {
                    showToast(`${newNotification.title}`);
                }
            }
        });
    }

    // Jalankan listener saat halaman dimuat
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            // Coba dapatkan data pengguna. Jika berhasil, artinya ada sesi login aktif.
            const user = await account.get();
            // Jika berhasil, aktifkan listener notifikasi
            listenForNotifications(user.$id);
        } catch (error) {
            // Jika gagal (tidak ada sesi login), jangan lakukan apa-apa.
            console.log("Pengguna belum login, listener notifikasi tidak diaktifkan di halaman ini.");
        }
    });
</script>
</body>
</html>